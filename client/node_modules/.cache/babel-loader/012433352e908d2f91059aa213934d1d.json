{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\me\\\\Documents\\\\GitHub\\\\my-itinerary\\\\client\\\\src\\\\component\\\\FavButton.jsx\";\nimport React, { Component } from 'react';\nimport { Button } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { addFav, removeFav } from '../actions/userActions';\nimport { loadUser } from '../actions/authActions';\n\nclass FavButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      favoritos: []\n    };\n  }\n\n  async componentDidMount() {\n    await this.props.loadUser();\n    console.log('user: ', this.props.usuario);\n    this.setearFavourites();\n  }\n\n  setearFavourites() {\n    if (this.props.usuario.itinerariesFav !== null) {\n      this.setState({\n        favoritos: this.props.usuario.itinerariesFav\n      });\n    }\n  }\n\n  favActions() {\n    this.props.loadUser();\n    this.setearFavourites();\n    const email = this.props.user.email;\n    const itinerayId = this.props.itineraryId;\n\n    if (!this.props.user.itinerariesFav.includes(itinerayId)) {\n      console.log(\"se agrego el favorito\");\n      this.props.addFav(email, itinerayId);\n    } else {\n      console.log(\"Se elimino el favorito\");\n      this.props.removeFav(email, itinerayId);\n    }\n\n    this.props.loadUser();\n    this.setearFavourites();\n    console.log(this.props.user.itinerariesFav.length);\n  }\n\n  showButtonFav() {\n    const itinerayId = this.props.itineraryId;\n\n    if (!this.state.favoritos.includes(itinerayId)) {\n      return React.createElement(Button, {\n        outline: true,\n        color: \"success\",\n        size: \"sm\",\n        onClick: this.favActions.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Add Favourite\");\n    } else {\n      return React.createElement(Button, {\n        size: \"sm\",\n        color: \"success\",\n        onClick: this.favActions.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Favourite\");\n    }\n  }\n\n  render() {\n    return this.showButtonFav();\n  }\n\n} // ItineraryList.propTypes = {\n//     getItineraries: PropTypes.func.isRequired,\n//     itineraries: PropTypes.object.isRequired\n// }\n\n\nFavButton.propTypes = {\n  addFav: PropTypes.func.isRequired,\n  removeFav: PropTypes.func.isRequired,\n  loadUser: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => {\n  return {\n    user: state.auth.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addFav,\n  removeFav,\n  loadUser\n})(FavButton);","map":{"version":3,"sources":["C:/Users/me/Documents/GitHub/my-itinerary/client/src/component/FavButton.jsx"],"names":["React","Component","Button","connect","PropTypes","addFav","removeFav","loadUser","FavButton","constructor","props","state","favoritos","componentDidMount","console","log","usuario","setearFavourites","itinerariesFav","setState","favActions","email","user","itinerayId","itineraryId","includes","length","showButtonFav","bind","render","propTypes","func","isRequired","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { addFav, removeFav } from '../actions/userActions';\r\nimport { loadUser } from '../actions/authActions';\r\n\r\n\r\n\r\nclass FavButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      favoritos:[]\r\n    }\r\n  \r\n\r\n  }\r\n\r\n    static propTypes = {\r\n        addFav: PropTypes.func.isRequired,\r\n        removeFav: PropTypes.func.isRequired,\r\n        loadUser: PropTypes.func.isRequired\r\n      };\r\n\r\n      async componentDidMount(){\r\n\r\n        await this.props.loadUser()\r\n\r\n        console.log('user: ', this.props.usuario);\r\n        \r\n        \r\n        this.setearFavourites()\r\n\r\n      }\r\n   \r\n    setearFavourites() {\r\n      if(this.props.usuario.itinerariesFav!==null){\r\n      this.setState({\r\n        favoritos : this.props.usuario.itinerariesFav\r\n      })\r\n      }\r\n    }\r\n      \r\n\r\n    favActions (){\r\n\r\n        this.props.loadUser()\r\n       \r\n        this.setearFavourites()\r\n\r\n        const email = this.props.user.email;\r\n        const itinerayId = this.props.itineraryId;\r\n    \r\n\r\n        if(!this.props.user.itinerariesFav.includes(itinerayId)){\r\n          console.log(\"se agrego el favorito\")\r\n          this.props.addFav(email, itinerayId);\r\n\r\n        }else{\r\n          console.log(\"Se elimino el favorito\")\r\n          this.props.removeFav(email,itinerayId)\r\n        }\r\n        \r\n        this.props.loadUser()\r\n       \r\n        this.setearFavourites()\r\n\r\n        console.log(this.props.user.itinerariesFav.length)\r\n    };\r\n    \r\nshowButtonFav(){\r\n  \r\n  const itinerayId = this.props.itineraryId;\r\n\r\n  if(!this.state.favoritos.includes(itinerayId)){\r\n    return <Button outline color=\"success\" size=\"sm\" onClick={this.favActions.bind(this)}>\r\n            Add Favourite\r\n        </Button>\r\n  }else{\r\n    return <Button size=\"sm\" color=\"success\"  onClick={this.favActions.bind(this)}>\r\n            Favourite\r\n        </Button>\r\n  }\r\n}\r\n\r\n    render(){\r\n\r\n        return(\r\n          this.showButtonFav()\r\n        \r\n        );\r\n    }\r\n}\r\n\r\n// ItineraryList.propTypes = {\r\n//     getItineraries: PropTypes.func.isRequired,\r\n//     itineraries: PropTypes.object.isRequired\r\n// }\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  \r\n \r\n  return {\r\n    user: state.auth.user\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { addFav, removeFav, loadUser })(FavButton);"]},"metadata":{},"sourceType":"module"}